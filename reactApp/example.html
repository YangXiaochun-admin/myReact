<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Hello React!</title>
    <script src="node_modules/react/dist/react.js"></script>
    <script src="node_modules/react-dom/dist/react-dom.js"></script>
    <script src="node_modules/babel-standalone/babel.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
    //    基类  父类   基层类
    /*类名首字母必须大写
    * 1、我们在使用已经定义好的组件的时候，可以传入属性
    * 2、我们可以在组件的内部获取到传进来的值  用this.props.属性名 this.props上有个属性children ，用来获取子节点
    * 3、我们不能在组件内部更改传进来的属性的值
    * */

    /*
    * 1、渲染的组件必须只有一个根元素
    * 2、jsx   使用简单
    * 3、单向数据流  绑定数据简单
    * 4、虚拟dom   加快运行效率
    * 5、组件化开发
    * 6、props
    * 7、this.setState
    * */
    /*var arr=[
        {title:"标题1",con:"内容1"},
        {title:"标题2",con:"内容2"},
        {title:"标题3",con:"内容3"},
        {title:"标题4",con:"内容4"}

    ]
    class Hello extends React.Component {
        constructor() {
            super();//引入父元素的this指针
            this.state={name:"张三"};
        }
        change(){
            this.setState({name:"李四"});
        }//this应该指向div,但是当前div还没渲染，故要在div里bind(this)
        //要修改的值都放在this.state上，必须是个对象
        //1、setState 重新设置 state值
        //2、          重新渲染
        render() {
            return (
                <div onClick={this.change.bind(this)}>{this.state.name}</div>
            )
        }
    }
    ReactDOM.render(<Hello/>,document.getElementById("root"))
*/
/*********************************************************************/
//映射
    /*var arr=[1,2,3,4,5];
    arr.map(function(a,b,c){//a每一个  b下标    c有几个就遍历几次
        console.log(d);
        return a+1;
    })*/
/*********************************************************************/
    //    console.log(window);
    //    var Hello=React.createClass({
    //        render:function(){
    //            var a="Hello";
    //            return <div>{a}</div>
    //        }
    //    })
    //    ReactDOM.render(Hello,document.getElementById("root"));

    /*********************************************************************/
//组件的嵌套
    /*class Parent extends React.Component{
        constructor(){
            super();
        }
        render(){
            return (
                <ul>
                    <Son></Son>
                </ul>
            )
        }
    }
    class Son extends React.Component{
        constructor(){
            super();
        }
        render(){
            return (
                   <li>son</li>
            )
        }
    }
    ReactDOM.render(<Parent/>,document.getElementById("root"));*/
    /*********************************************************************/
//改变state
    /*class Time extends React.Component{
        constructor(){
            super();
            this.state={time:0};
            console.log("构造函数");
        }
        fn(){
            this.setState({time:1});
        }
        componentWillUpdate(){
            console.log("即将更新");
        }
        componentDidUpdate(){
            console.log("更新完了");
        }
        //一个组件从无到有的过程
        componentWillMount(){
            console.log("组件即将装配到页面当中");
        }
        render(){
            console.log("组件正在装配到页面当中");
            return <div>{this.state.time}</div>
        }
        componentDidMount(){
            var num=0;
            setInterval(()=>{   //用箭头函数解决this指向
                num++;
                this.setState({time:num})
            },1000)
            console.log("组件渲染装配到页面当中");
        }
    }
    ReactDOM.render(<Time/>,document.getElementById("root"))*/
    /*********************************************************************/
//    todo
//    props
//    state
//    setState

    class Title extends React.Component{
        constructor(){
            super();
        }
        render(){
            return <h3>{this.props.title}</h3>
        }
    }
    class List extends React.Component{
        constructor(){
            super();
        }
        render(){
            return (
                <ul>{
                    this.props.listData.map((a,b)=>{
                        return <li key={b}>{a.con}</li>
                    })
                }
                </ul>
            )
        }
    }
    class Todo extends React.Component{
        constructor(){
            super();
            this.state={text:"",arr:[]}
        }
        change(e){
            var val= e.target.value;//e.target是input
            this.state.text=val
        }
        click(){
            var obj={
                con:this.state.text
            }
            this.setState(function(prev){//prev是上次的内容
                return{
                    arr:prev.arr.concat(obj)
                }
            })
        }
        render(){
            return (
                <div>
                    <Title title="待办事项"/>
                    <List listData={this.state.arr}/>
                    <input type="text" onChange={this.change.bind(this)}/>

                    <input type="button" value="提交" onClick={this.click.bind(this)}/>
                </div>
            )
        }
    }
    ReactDOM.render(<Todo/>,document.getElementById("root"))
</script>
</body>
</html>